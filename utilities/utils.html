

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>karabo.util package &mdash; Karabo-Pipeline 0.34.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=bbce7252"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Development Documentation" href="../development.html" />
    <link rel="prev" title="karabo.sourcedetection" href="../main_features/sourcedetection.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation_user.html">Installation (User)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../container.html">Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parallel_processing.html">Parallel processing with Karabo</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Simulation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../main_features/simulation.html">karabo.simulation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Imaging</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../main_features/imaging.html">karabo.imaging.image</a></li>
<li class="toctree-l1"><a class="reference internal" href="../main_features/base_imaging.html">karabo.imaging.imager_base</a></li>
<li class="toctree-l1"><a class="reference internal" href="../main_features/oskar_imaging.html">karabo.imaging.imager_oskar</a></li>
<li class="toctree-l1"><a class="reference internal" href="../main_features/rascil_imaging.html">karabo.imaging.imager_rascil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../main_features/wsclean_imaging.html">karabo.imaging.imager_wsclean</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Source Detection</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../main_features/sourcedetection.html">karabo.sourcedetection</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Utilities</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">karabo.util package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-karabo.util.dask">karabo.util.dask</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.dask.DaskHandler"><code class="docutils literal notranslate"><span class="pre">DaskHandler</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandler.dask_client"><code class="docutils literal notranslate"><span class="pre">DaskHandler.dask_client</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandler.memory_limit"><code class="docutils literal notranslate"><span class="pre">DaskHandler.memory_limit</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandler.n_threads_per_worker"><code class="docutils literal notranslate"><span class="pre">DaskHandler.n_threads_per_worker</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandler.use_dask"><code class="docutils literal notranslate"><span class="pre">DaskHandler.use_dask</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandler.use_processes"><code class="docutils literal notranslate"><span class="pre">DaskHandler.use_processes</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandler.get_dask_client"><code class="docutils literal notranslate"><span class="pre">DaskHandler.get_dask_client()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandler.parallelize_with_dask"><code class="docutils literal notranslate"><span class="pre">DaskHandler.parallelize_with_dask()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandler.setup"><code class="docutils literal notranslate"><span class="pre">DaskHandler.setup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandler.should_dask_be_used"><code class="docutils literal notranslate"><span class="pre">DaskHandler.should_dask_be_used()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.dask.DaskHandlerBasic"><code class="docutils literal notranslate"><span class="pre">DaskHandlerBasic</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerBasic.dask_client"><code class="docutils literal notranslate"><span class="pre">DaskHandlerBasic.dask_client</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerBasic.memory_limit"><code class="docutils literal notranslate"><span class="pre">DaskHandlerBasic.memory_limit</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerBasic.n_threads_per_worker"><code class="docutils literal notranslate"><span class="pre">DaskHandlerBasic.n_threads_per_worker</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerBasic.use_dask"><code class="docutils literal notranslate"><span class="pre">DaskHandlerBasic.use_dask</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerBasic.use_processes"><code class="docutils literal notranslate"><span class="pre">DaskHandlerBasic.use_processes</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id0"><code class="docutils literal notranslate"><span class="pre">DaskHandlerBasic.dask_client</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerBasic.get_dask_client"><code class="docutils literal notranslate"><span class="pre">DaskHandlerBasic.get_dask_client()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1"><code class="docutils literal notranslate"><span class="pre">DaskHandlerBasic.memory_limit</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2"><code class="docutils literal notranslate"><span class="pre">DaskHandlerBasic.n_threads_per_worker</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerBasic.parallelize_with_dask"><code class="docutils literal notranslate"><span class="pre">DaskHandlerBasic.parallelize_with_dask()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerBasic.setup"><code class="docutils literal notranslate"><span class="pre">DaskHandlerBasic.setup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerBasic.should_dask_be_used"><code class="docutils literal notranslate"><span class="pre">DaskHandlerBasic.should_dask_be_used()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3"><code class="docutils literal notranslate"><span class="pre">DaskHandlerBasic.use_dask</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4"><code class="docutils literal notranslate"><span class="pre">DaskHandlerBasic.use_processes</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.dask.DaskHandlerSlurm"><code class="docutils literal notranslate"><span class="pre">DaskHandlerSlurm</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerSlurm.use_workers_or_nannies"><code class="docutils literal notranslate"><span class="pre">DaskHandlerSlurm.use_workers_or_nannies</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerSlurm.n_workers_scheduler_node"><code class="docutils literal notranslate"><span class="pre">DaskHandlerSlurm.n_workers_scheduler_node</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerSlurm.timeout"><code class="docutils literal notranslate"><span class="pre">DaskHandlerSlurm.timeout</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerSlurm.get_dask_client"><code class="docutils literal notranslate"><span class="pre">DaskHandlerSlurm.get_dask_client()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerSlurm.get_node_id"><code class="docutils literal notranslate"><span class="pre">DaskHandlerSlurm.get_node_id()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerSlurm.get_node_name"><code class="docutils literal notranslate"><span class="pre">DaskHandlerSlurm.get_node_name()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerSlurm.get_number_of_nodes"><code class="docutils literal notranslate"><span class="pre">DaskHandlerSlurm.get_number_of_nodes()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerSlurm.is_first_node"><code class="docutils literal notranslate"><span class="pre">DaskHandlerSlurm.is_first_node()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerSlurm.is_on_slurm_cluster"><code class="docutils literal notranslate"><span class="pre">DaskHandlerSlurm.is_on_slurm_cluster()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5"><code class="docutils literal notranslate"><span class="pre">DaskHandlerSlurm.n_workers_scheduler_node</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.dask.DaskHandlerSlurm.should_dask_be_used"><code class="docutils literal notranslate"><span class="pre">DaskHandlerSlurm.should_dask_be_used()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6"><code class="docutils literal notranslate"><span class="pre">DaskHandlerSlurm.timeout</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7"><code class="docutils literal notranslate"><span class="pre">DaskHandlerSlurm.use_workers_or_nannies</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-karabo.util.gpu_util">karabo.util.gpu_util</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.gpu_util.get_gpu_memory"><code class="docutils literal notranslate"><span class="pre">get_gpu_memory()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.gpu_util.is_cuda_available"><code class="docutils literal notranslate"><span class="pre">is_cuda_available()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-karabo.util.hdf5_util">karabo.util.hdf5_util</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.hdf5_util.convert_healpix_2_radec"><code class="docutils literal notranslate"><span class="pre">convert_healpix_2_radec()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.hdf5_util.get_healpix_image"><code class="docutils literal notranslate"><span class="pre">get_healpix_image()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.hdf5_util.get_vis_from_hdf5"><code class="docutils literal notranslate"><span class="pre">get_vis_from_hdf5()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.hdf5_util.h5_diter"><code class="docutils literal notranslate"><span class="pre">h5_diter()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.hdf5_util.print_hd5_object_and_keys"><code class="docutils literal notranslate"><span class="pre">print_hd5_object_and_keys()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-karabo.util.file_handler">karabo.util.file_handler</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.file_handler.FileHandler"><code class="docutils literal notranslate"><span class="pre">FileHandler</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.file_handler.FileHandler.clean"><code class="docutils literal notranslate"><span class="pre">FileHandler.clean()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.file_handler.FileHandler.clean_instance"><code class="docutils literal notranslate"><span class="pre">FileHandler.clean_instance()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.file_handler.FileHandler.empty_dir"><code class="docutils literal notranslate"><span class="pre">FileHandler.empty_dir()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.file_handler.FileHandler.get_tmp_dir"><code class="docutils literal notranslate"><span class="pre">FileHandler.get_tmp_dir()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.file_handler.FileHandler.is_dir_empty"><code class="docutils literal notranslate"><span class="pre">FileHandler.is_dir_empty()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.file_handler.FileHandler.ltm"><code class="docutils literal notranslate"><span class="pre">FileHandler.ltm()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.file_handler.FileHandler.remove_empty_dirs"><code class="docutils literal notranslate"><span class="pre">FileHandler.remove_empty_dirs()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.file_handler.FileHandler.root_ltm"><code class="docutils literal notranslate"><span class="pre">FileHandler.root_ltm</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.file_handler.FileHandler.root_stm"><code class="docutils literal notranslate"><span class="pre">FileHandler.root_stm</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.file_handler.FileHandler.stm"><code class="docutils literal notranslate"><span class="pre">FileHandler.stm()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#karabo.util.file_handler.FileHandler.tmps"><code class="docutils literal notranslate"><span class="pre">FileHandler.tmps</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.file_handler.assert_valid_ending"><code class="docutils literal notranslate"><span class="pre">assert_valid_ending()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.file_handler.getsize"><code class="docutils literal notranslate"><span class="pre">getsize()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.file_handler.write_dir"><code class="docutils literal notranslate"><span class="pre">write_dir()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-karabo.util.math_util">karabo.util.math_util</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.math_util.Gauss"><code class="docutils literal notranslate"><span class="pre">Gauss()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.math_util.Voigt"><code class="docutils literal notranslate"><span class="pre">Voigt()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.math_util.cartesian_to_ll"><code class="docutils literal notranslate"><span class="pre">cartesian_to_ll()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.math_util.get_poisson_disk_sky"><code class="docutils literal notranslate"><span class="pre">get_poisson_disk_sky()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.math_util.long_lat_to_cartesian"><code class="docutils literal notranslate"><span class="pre">long_lat_to_cartesian()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.math_util.poisson_disc_samples"><code class="docutils literal notranslate"><span class="pre">poisson_disc_samples()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-karabo.util.rascil_util">karabo.util.rascil_util</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.rascil_util.filter_data_dir_warning_message"><code class="docutils literal notranslate"><span class="pre">filter_data_dir_warning_message()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-karabo.util.data_util">karabo.util.data_util</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.data_util.calculate_chunk_size_from_max_chunk_size_in_memory"><code class="docutils literal notranslate"><span class="pre">calculate_chunk_size_from_max_chunk_size_in_memory()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.data_util.calculate_required_number_of_chunks"><code class="docutils literal notranslate"><span class="pre">calculate_required_number_of_chunks()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.data_util.extract_chars_from_string"><code class="docutils literal notranslate"><span class="pre">extract_chars_from_string()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.data_util.extract_digit_from_string"><code class="docutils literal notranslate"><span class="pre">extract_digit_from_string()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.data_util.get_module_absolute_path"><code class="docutils literal notranslate"><span class="pre">get_module_absolute_path()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.data_util.get_module_path_of_module"><code class="docutils literal notranslate"><span class="pre">get_module_path_of_module()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.data_util.get_spectral_sky_data"><code class="docutils literal notranslate"><span class="pre">get_spectral_sky_data()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.data_util.input_wrapper"><code class="docutils literal notranslate"><span class="pre">input_wrapper()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.data_util.parse_size"><code class="docutils literal notranslate"><span class="pre">parse_size()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.data_util.read_CSV_to_ndarray"><code class="docutils literal notranslate"><span class="pre">read_CSV_to_ndarray()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.data_util.resample_spectral_lines"><code class="docutils literal notranslate"><span class="pre">resample_spectral_lines()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-karabo.util.survey">karabo.util.survey</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#karabo.util.survey.create_MALS_survey_as_fits"><code class="docutils literal notranslate"><span class="pre">create_MALS_survey_as_fits()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Karabo-Pipeline</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">karabo.util package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/utilities/utils.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="karabo-util-package">
<h1>karabo.util package<a class="headerlink" href="#karabo-util-package" title="Link to this heading"></a></h1>
<p>This package provides auxiliary function used in different parts of
the code.</p>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-karabo.util.dask">
<span id="karabo-util-dask"></span><h2>karabo.util.dask<a class="headerlink" href="#module-karabo.util.dask" title="Link to this heading"></a></h2>
<p>Module for dask-related functionality.</p>
<dl class="py class">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DaskHandler</span></span><a class="headerlink" href="#karabo.util.dask.DaskHandler" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#karabo.util.dask.DaskHandlerBasic" title="karabo.util.dask.DaskHandlerBasic"><code class="xref py py-class docutils literal notranslate"><span class="pre">DaskHandlerBasic</span></code></a></p>
<p>Public &amp; dev API for dask associated functionality.</p>
<p>This is the public dask-api for Karabo, where you don’t have to worry which
dask-handler of this module to use. You can do almost everything through this
class. The only exception is, if you want to adjust the default settings on
a slurm-system (customization through <cite>DaskHandlerSlurm</cite>).</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandler.dask_client">
<span class="sig-name descname"><span class="pre">dask_client</span></span><a class="headerlink" href="#karabo.util.dask.DaskHandler.dask_client" title="Link to this definition"></a></dt>
<dd><p>The Dask client object. If None, a new client will be created.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>distributed.client.Client | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandler.memory_limit">
<span class="sig-name descname"><span class="pre">memory_limit</span></span><a class="headerlink" href="#karabo.util.dask.DaskHandler.memory_limit" title="Link to this definition"></a></dt>
<dd><p>The memory_limit per worker in GB. If None, the memory limit will
be set to the maximum available memory on the node (see documentation)
in dask for <cite>memory_limit</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandler.n_threads_per_worker">
<span class="sig-name descname"><span class="pre">n_threads_per_worker</span></span><a class="headerlink" href="#karabo.util.dask.DaskHandler.n_threads_per_worker" title="Link to this definition"></a></dt>
<dd><p>The number of threads to use per worker. Standard is None, which
means that the number of threads will be equal to the number of
cores.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandler.use_dask">
<span class="sig-name descname"><span class="pre">use_dask</span></span><a class="headerlink" href="#karabo.util.dask.DaskHandler.use_dask" title="Link to this definition"></a></dt>
<dd><p>Whether to use Dask or not. If None, then Karabo will decide whether
to use dask or not for certain tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandler.use_processes">
<span class="sig-name descname"><span class="pre">use_processes</span></span><a class="headerlink" href="#karabo.util.dask.DaskHandler.use_processes" title="Link to this definition"></a></dt>
<dd><p>Use processes instead of threads?
Threads:</p>
<blockquote>
<div><ul class="simple">
<li><p>Fast to initiate.</p></li>
<li><p>No need to transfer data to them.</p></li>
<li><p>Limited by the GIL, which allows one thread to read the code at once.</p></li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>Processes:</dt><dd><ul class="simple">
<li><p>Take time to set up.</p></li>
<li><p>Slow to transfer data to.</p></li>
<li><p>Each have their own GIL and so don’t need to take turns reading the code.</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandler.get_dask_client">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_dask_client</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Client</span></span></span><a class="headerlink" href="#karabo.util.dask.DaskHandler.get_dask_client" title="Link to this definition"></a></dt>
<dd><p>Get (create if not exists) a dask-client.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dask-client.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandler.parallelize_with_dask">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parallelize_with_dask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterate_function</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iterable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#karabo.util.dask.DaskHandler.parallelize_with_dask" title="Link to this definition"></a></dt>
<dd><p>Run a function over an iterable in parallel using dask, and gather the results.</p>
<p>args &amp; kwargs will get passed to <cite>Delayed</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iterate_function</strong> – The function to be applied to each element of <cite>iterable</cite>.
The function takes the current element of the iterable as its first
argument, followed by any positional arguments, and then any keyword
arguments.</p></li>
<li><p><strong>iterable</strong> – The iterable over which the function will be applied. Each element of
<cite>iterable</cite> will be passed to <cite>iterate_function</cite>.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Returns: A tuple containing the results of the <cite>iterate_function</cite> for each</dt><dd><p>element in the iterable. The results are gathered using dask’s <cite>compute</cite>
function.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandler.setup">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#karabo.util.dask.DaskHandler.setup" title="Link to this definition"></a></dt>
<dd><p>Calls <cite>get_dask_client</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandler.should_dask_be_used">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">should_dask_be_used</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">override</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#karabo.util.dask.DaskHandler.should_dask_be_used" title="Link to this definition"></a></dt>
<dd><p>Util function to decide whether dask should be used or not.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>override</strong> – Override? Has highest priority.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Decision whether dask should be used or not.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerBasic">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DaskHandlerBasic</span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerBasic" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base-class for dask-handler functionality.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerBasic.dask_client">
<span class="sig-name descname"><span class="pre">dask_client</span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerBasic.dask_client" title="Link to this definition"></a></dt>
<dd><p>The Dask client object. If None, a new client will be created.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>distributed.client.Client | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerBasic.memory_limit">
<span class="sig-name descname"><span class="pre">memory_limit</span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerBasic.memory_limit" title="Link to this definition"></a></dt>
<dd><p>The memory_limit per worker in GB. If None, the memory limit will
be set to the maximum available memory on the node (see documentation)
in dask for <cite>memory_limit</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerBasic.n_threads_per_worker">
<span class="sig-name descname"><span class="pre">n_threads_per_worker</span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerBasic.n_threads_per_worker" title="Link to this definition"></a></dt>
<dd><p>The number of threads to use per worker. Standard is None, which
means that the number of threads will be equal to the number of
cores.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerBasic.use_dask">
<span class="sig-name descname"><span class="pre">use_dask</span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerBasic.use_dask" title="Link to this definition"></a></dt>
<dd><p>Whether to use Dask or not. If None, then Karabo will decide whether
to use dask or not for certain tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerBasic.use_processes">
<span class="sig-name descname"><span class="pre">use_processes</span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerBasic.use_processes" title="Link to this definition"></a></dt>
<dd><p>Use processes instead of threads?
Threads:</p>
<blockquote>
<div><ul class="simple">
<li><p>Fast to initiate.</p></li>
<li><p>No need to transfer data to them.</p></li>
<li><p>Limited by the GIL, which allows one thread to read the code at once.</p></li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>Processes:</dt><dd><ul class="simple">
<li><p>Take time to set up.</p></li>
<li><p>Slow to transfer data to.</p></li>
<li><p>Each have their own GIL and so don’t need to take turns reading the code.</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id0">
<span class="sig-name descname"><span class="pre">dask_client</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Client</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id0" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerBasic.get_dask_client">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_dask_client</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Client</span></span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerBasic.get_dask_client" title="Link to this definition"></a></dt>
<dd><p>Get (create if not exists) a dask-client.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dask-client.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id1">
<span class="sig-name descname"><span class="pre">memory_limit</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id1" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id2">
<span class="sig-name descname"><span class="pre">n_threads_per_worker</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id2" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerBasic.parallelize_with_dask">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parallelize_with_dask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterate_function</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iterable</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerBasic.parallelize_with_dask" title="Link to this definition"></a></dt>
<dd><p>Run a function over an iterable in parallel using dask, and gather the results.</p>
<p>args &amp; kwargs will get passed to <cite>Delayed</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iterate_function</strong> – The function to be applied to each element of <cite>iterable</cite>.
The function takes the current element of the iterable as its first
argument, followed by any positional arguments, and then any keyword
arguments.</p></li>
<li><p><strong>iterable</strong> – The iterable over which the function will be applied. Each element of
<cite>iterable</cite> will be passed to <cite>iterate_function</cite>.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Returns: A tuple containing the results of the <cite>iterate_function</cite> for each</dt><dd><p>element in the iterable. The results are gathered using dask’s <cite>compute</cite>
function.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerBasic.setup">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerBasic.setup" title="Link to this definition"></a></dt>
<dd><p>Calls <cite>get_dask_client</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerBasic.should_dask_be_used">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">should_dask_be_used</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">override</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerBasic.should_dask_be_used" title="Link to this definition"></a></dt>
<dd><p>Util function to decide whether dask should be used or not.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>override</strong> – Override? Has highest priority.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Decision whether dask should be used or not.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id3">
<span class="sig-name descname"><span class="pre">use_dask</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id3" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id4">
<span class="sig-name descname"><span class="pre">use_processes</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#id4" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerSlurm">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DaskHandlerSlurm</span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerSlurm" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#karabo.util.dask.DaskHandlerBasic" title="karabo.util.dask.DaskHandlerBasic"><code class="xref py py-class docutils literal notranslate"><span class="pre">DaskHandlerBasic</span></code></a></p>
<p>Dask-handler for slurm-based jobs.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerSlurm.use_workers_or_nannies">
<span class="sig-name descname"><span class="pre">use_workers_or_nannies</span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerSlurm.use_workers_or_nannies" title="Link to this definition"></a></dt>
<dd><p>Whether to use workers or nannies (default).
This could lead to more processing (see documentation for dask usage
in Karabo).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Literal[‘workers’, ‘nannies’]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerSlurm.n_workers_scheduler_node">
<span class="sig-name descname"><span class="pre">n_workers_scheduler_node</span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerSlurm.n_workers_scheduler_node" title="Link to this definition"></a></dt>
<dd><p>The number of workers to start on the scheduler node.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerSlurm.timeout">
<span class="sig-name descname"><span class="pre">timeout</span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerSlurm.timeout" title="Link to this definition"></a></dt>
<dd><p>Timeout in seconds for the dask-scheduler to wait for all the
workers to connect.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerSlurm.get_dask_client">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_dask_client</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Client</span></span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerSlurm.get_dask_client" title="Link to this definition"></a></dt>
<dd><p>Get (create if not exists) a dask-client for a SLURM environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dask-client.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerSlurm.get_node_id">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_node_id</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerSlurm.get_node_id" title="Link to this definition"></a></dt>
<dd><p>Gets the current node-id.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Node-id.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerSlurm.get_node_name">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_node_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerSlurm.get_node_name" title="Link to this definition"></a></dt>
<dd><p>Gets the current node-name.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Node-name.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerSlurm.get_number_of_nodes">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_number_of_nodes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerSlurm.get_number_of_nodes" title="Link to this definition"></a></dt>
<dd><p>Gets the number of nodes of the slurm-job.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Number of nodes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerSlurm.is_first_node">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_first_node</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerSlurm.is_first_node" title="Link to this definition"></a></dt>
<dd><p>Util function to check if current-node is fist-node.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Check-result.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerSlurm.is_on_slurm_cluster">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_on_slurm_cluster</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerSlurm.is_on_slurm_cluster" title="Link to this definition"></a></dt>
<dd><p>Util function to check if code is running in a slurm-job.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Check-result.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id5">
<span class="sig-name descname"><span class="pre">n_workers_scheduler_node</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#id5" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.dask.DaskHandlerSlurm.should_dask_be_used">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">should_dask_be_used</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">override</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#karabo.util.dask.DaskHandlerSlurm.should_dask_be_used" title="Link to this definition"></a></dt>
<dd><p>Util function to decide whether dask should be used or not.</p>
<dl class="simple">
<dt>This implementation differs a bit from the basic-class, where</dt><dd><p>on SLURM-systems, additional checks are taken into consideration.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>override</strong> – Override? Has highest priority.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Decision whether dask should be used or not.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id6">
<span class="sig-name descname"><span class="pre">timeout</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">60</span></em><a class="headerlink" href="#id6" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id7">
<span class="sig-name descname"><span class="pre">use_workers_or_nannies</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'workers'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'nannies'</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'nannies'</span></em><a class="headerlink" href="#id7" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-karabo.util.gpu_util">
<span id="karabo-util-gpu-util"></span><h2>karabo.util.gpu_util<a class="headerlink" href="#module-karabo.util.gpu_util" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.gpu_util.get_gpu_memory">
<span class="sig-name descname"><span class="pre">get_gpu_memory</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#karabo.util.gpu_util.get_gpu_memory" title="Link to this definition"></a></dt>
<dd><p>Retrieves the available GPU memory in MiB by invoking nvidia-smi.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Available GPU memory in MiB.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>RuntimeError</strong> – If unexpected output is encountered when running nvidia-smi.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.gpu_util.is_cuda_available">
<span class="sig-name descname"><span class="pre">is_cuda_available</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#karabo.util.gpu_util.is_cuda_available" title="Link to this definition"></a></dt>
<dd><p>Checks if CUDA-compatible GPU is available on the system by invoking nvidia-smi.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if a CUDA-compatible GPU is found, otherwise False.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-karabo.util.hdf5_util">
<span id="karabo-util-hdf5-util"></span><h2>karabo.util.hdf5_util<a class="headerlink" href="#module-karabo.util.hdf5_util" title="Link to this heading"></a></h2>
<p>Collection of functions to work with HDF5 files.</p>
<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.hdf5_util.convert_healpix_2_radec">
<span class="sig-name descname"><span class="pre">convert_healpix_2_radec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float64</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float64</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#karabo.util.hdf5_util.convert_healpix_2_radec" title="Link to this definition"></a></dt>
<dd><p>Convert array from healpix to 2-D array of RADEC</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>arr</strong> – The healpix 2D array to be converted</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>RADEC in degrees</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[<a href="#id8"><span class="problematic" id="id9">np.float_</span></a>, <a href="#id10"><span class="problematic" id="id11">np.float_</span></a>, int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.hdf5_util.get_healpix_image">
<span class="sig-name descname"><span class="pre">get_healpix_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hdffile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#karabo.util.hdf5_util.get_healpix_image" title="Link to this definition"></a></dt>
<dd><p>Get index maps, maps and frequency from HDF5 file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>hdffile</strong> – Path to HDF5 file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.hdf5_util.get_vis_from_hdf5">
<span class="sig-name descname"><span class="pre">get_vis_from_hdf5</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hdffile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="headerlink" href="#karabo.util.hdf5_util.get_vis_from_hdf5" title="Link to this definition"></a></dt>
<dd><p>Get index maps, maps and frequency from HDF5 file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>hdffile</strong> – Path to HDF5 file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.hdf5_util.h5_diter">
<span class="sig-name descname"><span class="pre">h5_diter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">g</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Group</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dataset</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#karabo.util.hdf5_util.h5_diter" title="Link to this definition"></a></dt>
<dd><p>Get the data elements from the hdf5 datasets and groups</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>g</strong> – A handle to an open HDF5 file</p></li>
<li><p><strong>prefix</strong> – Add this prefix to the groups and datasets</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Generator which allows to iterate over the items.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Generator</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.hdf5_util.print_hd5_object_and_keys">
<span class="sig-name descname"><span class="pre">print_hd5_object_and_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hdffile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">File</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">KeysViewHDF5</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#karabo.util.hdf5_util.print_hd5_object_and_keys" title="Link to this definition"></a></dt>
<dd><p>Read HDF5 file and lists its structure to the console.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>hdffile</strong> – Path to HDF5 file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>kkeys found in the HDF5 hierarchy.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[h5.File, KeysViewHDF5]</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-karabo.util.file_handler">
<span id="karabo-util-file-handler"></span><h2>karabo.util.file_handler<a class="headerlink" href="#module-karabo.util.file_handler" title="Link to this heading"></a></h2>
<p>Offers functionality for handling caching data on disk and
reading/writung to temporary files.</p>
<dl class="py class">
<dt class="sig sig-object py" id="karabo.util.file_handler.FileHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FileHandler</span></span><a class="headerlink" href="#karabo.util.file_handler.FileHandler" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Utility file-handler for unspecified directories.</p>
<p>Provides cache-management functionality.
<cite>FileHandler.root_stm</cite> (short-term-memory-dir) and <cite>FileHandler.root_ltm</cite>
(long-term-memory-dir) are static root-directories where each according cache-dir
is located. In case someone wants to extract something specific from the cache,
the path is usually printed blue &amp; bold in stdout.</p>
<p>Honors ‘TMPDIR’ &amp; ‘TMP’ and ‘SCRATCH’ env-var(s) for STM-disk-cache where
‘TMPDIR’ = ‘TMP’ &gt; ‘SCRATCH’ &gt; /tmp
Honors ‘XDG_CACHE_HOME’ env-var(s) for LTM-disk-cache where
‘XDG_CACHE_HOME’ &gt; $HOME/.cache &gt; /tmp
Note: Setting env-vars has only an effect if they’re set before importing Karabo.
Run-time adjustments must be done directly on <cite>root_stm</cite> and <cite>root_ltm</cite>!</p>
<p>The root STM and LTM must be unique per user (seeded rnd chars+digits) to
avoid conflicting dir-names on any computer with any root-directory.</p>
<p>LTM-root
└── karabo-LTM-&lt;user&gt;-&lt;10 rnd chars+digits&gt;</p>
<blockquote>
<div><p>├── &lt;prefix&gt;&lt;10 rnd chars+digits&gt;
|    ├── &lt;subdir&gt;
|    └── &lt;file&gt;
└── &lt;prefix&gt;&lt;10 rnd chars+digits&gt;</p>
<blockquote>
<div><p>├── &lt;subdir&gt;
└── &lt;file&gt;</p>
</div></blockquote>
</div></blockquote>
<p>STM-root
└── karabo-STM-&lt;user&gt;-&lt;10 rnd chars+digits&gt;</p>
<blockquote>
<div><p>├── &lt;prefix&gt;&lt;10 rnd chars+digits&gt;
|    ├── &lt;subdir&gt;
|    └── &lt;file&gt;
└── &lt;prefix&gt;&lt;10 rnd chars+digits&gt;</p>
<blockquote>
<div><p>├── &lt;subdir&gt;
└── &lt;file&gt;</p>
</div></blockquote>
</div></blockquote>
<p>FileHandler can be used the same way as <cite>tempfile.TemporaryDirectory</cite> using <cite>with</cite>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.file_handler.FileHandler.clean">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">clean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">term</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'long'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'short'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'short'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#karabo.util.file_handler.FileHandler.clean" title="Link to this definition"></a></dt>
<dd><p>Removes the entire directory specified by <cite>term</cite>.</p>
<p>We strongly suggest to NOT use this function in a workflow. This function
removed the entire karabo-disk-cache. So if there’s another karabo-process
running in parallel, you could mess with their disk-cache as well.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>term</strong> – “long” or “short” term memory</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.file_handler.FileHandler.clean_instance">
<span class="sig-name descname"><span class="pre">clean_instance</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#karabo.util.file_handler.FileHandler.clean_instance" title="Link to this definition"></a></dt>
<dd><p>Cleans instance-bound tmp-dirs of <cite>self.tmps</cite> from disk.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.file_handler.FileHandler.empty_dir">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">empty_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#karabo.util.file_handler.FileHandler.empty_dir" title="Link to this definition"></a></dt>
<dd><p>Deletes all contents of <cite>dir_path</cite>, but not the directory itself.</p>
<p>This function assumes that all files and directories are owned by
the function-user.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dir_path</strong> – Directory to empty.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.file_handler.FileHandler.get_tmp_dir">
<span class="sig-name descname"><span class="pre">get_tmp_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">term</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'short'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'short'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">purpose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mkdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bytes</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#karabo.util.file_handler.FileHandler.get_tmp_dir" title="Link to this definition"></a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_tmp_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">term</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'long'</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">purpose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mkdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bytes</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span></dt>
<dd><p>Gets a tmp-dir path.</p>
<p>This is the to-go function to get a tmp-dir in the according directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prefix</strong> – Dir-name prefix for STM (optional) and dir-name for LTM (required).</p></li>
<li><p><strong>term</strong> – “short” for STM or “long” for LTM.</p></li>
<li><p><strong>purpose</strong> – Creates a verbose print-msg with it’s purpose if set.</p></li>
<li><p><strong>unique</strong> – If an object which has attributes is provided, then you get
the same tmp-dir for the unique instance.</p></li>
<li><p><strong>mkdir</strong> – Make-dir directly?</p></li>
<li><p><strong>seed</strong> – Seed rnd chars+digits of a STM sub-dir for relocation
purpose of different processes? Shouldn’t be used for LTM sub-dirs,
unless you know what you’re doing. LTM sub-dirs are already seeded with
<cite>prefix</cite>. However, if they are seeded for some reason, the seed is then
something like <cite>prefix</cite> + <cite>seed</cite>, which leads to different LTM sub-dirs.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>tmp-dir path</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.file_handler.FileHandler.is_dir_empty">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_dir_empty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#karabo.util.file_handler.FileHandler.is_dir_empty" title="Link to this definition"></a></dt>
<dd><p>Checks if <cite>dirname</cite> is empty assuming <cite>dirname</cite> exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dirname</strong> – Directory to check.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>NotADirectoryError</strong> – If <cite>dirname</cite> is not an existing directory.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if dir is empty, else False</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.file_handler.FileHandler.ltm">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ltm</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#karabo.util.file_handler.FileHandler.ltm" title="Link to this definition"></a></dt>
<dd><p>LTM (long-term-memory) path.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.file_handler.FileHandler.remove_empty_dirs">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_empty_dirs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">term</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'long'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'short'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'short'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#karabo.util.file_handler.FileHandler.remove_empty_dirs" title="Link to this definition"></a></dt>
<dd><p>Removes empty directories in the chosen cache-dir.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>term</strong> – “long” or “short” term memory</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="karabo.util.file_handler.FileHandler.root_ltm">
<span class="sig-name descname"><span class="pre">root_ltm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'/home/runner/.cache'</span></em><a class="headerlink" href="#karabo.util.file_handler.FileHandler.root_ltm" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="karabo.util.file_handler.FileHandler.root_stm">
<span class="sig-name descname"><span class="pre">root_stm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'/tmp'</span></em><a class="headerlink" href="#karabo.util.file_handler.FileHandler.root_stm" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="karabo.util.file_handler.FileHandler.stm">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stm</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#karabo.util.file_handler.FileHandler.stm" title="Link to this definition"></a></dt>
<dd><p>STM (short-term-memory) path.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="karabo.util.file_handler.FileHandler.tmps">
<span class="sig-name descname"><span class="pre">tmps</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#karabo.util.file_handler.FileHandler.tmps" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.file_handler.assert_valid_ending">
<span class="sig-name descname"><span class="pre">assert_valid_ending</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ending</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#karabo.util.file_handler.assert_valid_ending" title="Link to this definition"></a></dt>
<dd><p>Utility function to check if the ending of <cite>path</cite> is <cite>ending</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – Path to check.</p></li>
<li><p><strong>ending</strong> – Ending match.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – When the ending of <cite>path</cite> doesn’t match <cite>ending</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.file_handler.getsize">
<span class="sig-name descname"><span class="pre">getsize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#karabo.util.file_handler.getsize" title="Link to this definition"></a></dt>
<dd><p>Gets the total size of a file or directory in number of bytes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>inode</strong> – Directory or file to get size from. Can take a while for a large dir.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Number of bytes of <cite>inode</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.file_handler.write_dir">
<span class="sig-name descname"><span class="pre">write_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TDirPathType</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><span class="pre">TDirPathType</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#karabo.util.file_handler.write_dir" title="Link to this definition"></a></dt>
<dd><p>Enables transactional creating and writing into <cite>dir</cite>.</p>
<p>Assumes that <cite>dir</cite> is empty, meaning NOT partially filled with anything.</p>
<p>This function is NOT thread-safe!</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dir</strong> – Directory to create &amp; write.</p></li>
<li><p><strong>overwrite</strong> – Allow overwrite? Be aware that it will replace the entire
<cite>dir</cite> if it already exists. So be careful to provide the correct dir.</p></li>
</ul>
</dd>
<dt class="field-even">Yields<span class="colon">:</span></dt>
<dd class="field-even"><p>Directory to fill safely.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-karabo.util.math_util">
<span id="karabo-util-math-util"></span><h2>karabo.util.math_util<a class="headerlink" href="#module-karabo.util.math_util" title="Link to this heading"></a></h2>
<p>A collection of mathematical functions, mainly used for creating virtual skies.</p>
<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.math_util.Gauss">
<span class="sig-name descname"><span class="pre">Gauss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">integer</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">floating</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">integer</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">floating</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">integer</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">floating</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">integer</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">floating</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">integer</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">floating</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#karabo.util.math_util.Gauss" title="Link to this definition"></a></dt>
<dd><p>Calculates the value of the Gaussian distribution at a single point <cite>x</cite> or
for an array of points.</p>
<p>This function is used in <cite>karabo.util.data_util.get_spectral_sky_data()</cite> but it
can be used elsewhere.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An argument can be a number or an array. If using arrays all shapes must match.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>NPFloatInpBroadType</em>) – Where to calculate the value</p></li>
<li><p><strong>x0</strong> (<em>NPFloatInpBroadType</em>) – Center point of distribution</p></li>
<li><p><strong>y0</strong> (<em>NPFloatInpBroadType</em>) – Offset in y direction</p></li>
<li><p><strong>a</strong> (<em>NPFloatInpBroadType</em>) – Amplitude (height of distribution function)</p></li>
<li><p><strong>sigma</strong> (<em>NPFloatInpBroadType</em>) – standard deviation (width of distribution)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A value or an array having the values of the             Gaussian funtion.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>NPFloatOutBroadType</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.math_util.Voigt">
<span class="sig-name descname"><span class="pre">Voigt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">integer</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">floating</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">integer</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">floating</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">integer</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">floating</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">integer</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">floating</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">integer</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">floating</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">integer</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">floating</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">int64</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#karabo.util.math_util.Voigt" title="Link to this definition"></a></dt>
<dd><p>Calculates the value of the Voigt profile at a single point <cite>x</cite> or
for an array of points.</p>
<p>This function is used in <cite>karabo.util.data_util.get_spectral_sky_data()</cite> but it
can be used elsewhere.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An argument can be a number or an array. If using arrays all shapes must match.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>NPFloatInpBroadType</em>) – Where to calculate the value</p></li>
<li><p><strong>x0</strong> (<em>NPFloatInpBroadType</em>) – Center point of distribution</p></li>
<li><p><strong>y0</strong> (<em>NPFloatInpBroadType</em>) – Offset in y direction</p></li>
<li><p><strong>a</strong> (<em>NPFloatInpBroadType</em>) – Amplitude (height of distribution function)</p></li>
<li><p><strong>sigma</strong> (<em>NPFloatInpBroadType</em>) – standard deviation (width of distribution)</p></li>
<li><p><strong>gamma</strong> (<em>NPFloatInpBroadType</em>) – FWHM of Lorentz component</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A value or an array having the values of the             Gaussian funtion.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>NPFloatOutBroadType</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.math_util.cartesian_to_ll">
<span class="sig-name descname"><span class="pre">cartesian_to_ll</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#karabo.util.math_util.cartesian_to_ll" title="Link to this definition"></a></dt>
<dd><p>Converts cartesian coordinates (geocentric) of a point on Earth to its
corresponding geodesic ones (latitude and longitude).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The converions does not take z into account. Instead, we set z to
be the Earth radius.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – cartesian x coordinate</p></li>
<li><p><strong>y</strong> – cartesian y coordinate</p></li>
<li><p><strong>z</strong> (<em>Optional</em>) – cartesian z coordinate. Defaults to the Earth radius.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Geodesic coordinates (latitude, longitude)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[float, float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.math_util.get_poisson_disk_sky">
<span class="sig-name descname"><span class="pre">get_poisson_disk_sky</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flux_min</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flux_max</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#karabo.util.math_util.get_poisson_disk_sky" title="Link to this definition"></a></dt>
<dd><p>Creates a virtual sky by creating random source with flux between
flux_min and flux_max.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_size</strong> (<em>Tuple</em><em>[</em><em>FloatLike</em><em>, </em><em>FloatLike</em><em>]</em>) – For sky min RA and Deg in degrees.</p></li>
<li><p><strong>max_size</strong> (<em>Tuple</em><em>[</em><em>FloatLike</em><em>, </em><em>FloatLike</em><em>]</em>) – Max. RA and Deg of sky.</p></li>
<li><p><strong>flux_min</strong> (<em>FloatLike</em>) – The minimal flux of the sources. Although the unit here
is arbitrary it is usuall Jy/s.</p></li>
<li><p><strong>flux_max</strong> (<em>FloatLike</em>) – The maximal flux.</p></li>
<li><p><strong>r</strong> (<em>int</em><em>, </em><em>optional</em>) – The minimal distance between points. Higher value gives
sparser sky. Defaults to 10.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Array of sources and flux             [[x1, y1, flux], [x2, y2, flux] …]</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>NDArray[<a href="#id12"><span class="problematic" id="id13">np.float_</span></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.math_util.long_lat_to_cartesian">
<span class="sig-name descname"><span class="pre">long_lat_to_cartesian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">integer</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">floating</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">integer</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">floating</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#karabo.util.math_util.long_lat_to_cartesian" title="Link to this definition"></a></dt>
<dd><p>Converts geodesic coordinates (latitude and longitude) into geocentric ones,
also called cartesian coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lat</strong> (<em>NPFloatLike</em>) – The latitude in degrees, west is negative.</p></li>
<li><p><strong>lon</strong> (<em>NPFloatLike</em>) – The longitude to convert, south is negative.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An array with the geodesic coordinates [x, y, z]</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>NDArray[<a href="#id14"><span class="problematic" id="id15">np.float_</span></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.math_util.poisson_disc_samples">
<span class="sig-name descname"><span class="pre">poisson_disc_samples</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ord</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'fro'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'nuc'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#karabo.util.math_util.poisson_disc_samples" title="Link to this definition"></a></dt>
<dd><p>This function helps to generate a virtual sky. It does this by randomly
sampling points using <strong>Poisson-disc sampling</strong>. This produces points
that are tightly-packed, but no closer to each other than a specified
minimum distance r. This is important when sampling on a sphere.
There is more information on <a class="reference external" href="https://www.jasondavies.com/maps/random-points/">https://www.jasondavies.com/maps/random-points/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>width</strong> (<em>FloatLike</em>) – Width of the sampling area</p></li>
<li><p><strong>height</strong> (<em>FloatLike</em>) – Height of the area</p></li>
<li><p><strong>r</strong> (<em>int</em>) – Minimal distance to keep between points</p></li>
<li><p><strong>k</strong> (<em>int</em><em>, </em><em>optional</em>) – How often the algorithm tries to fit a point.
Higher value give a more dense pointcloud but the generation takes
longer. Defaults to 5.</p></li>
<li><p><strong>ord</strong> (<em>Union</em><em>[</em><em>None</em><em>, </em><em>float</em><em>, </em><em>Literal</em><em>[</em><em>'fro'</em><em>, </em><em>'nuc</em><em>]</em><em>]</em><em>, </em><em>optional</em>) – <p>Which norm to use
for calulating the distance. Options are</p>
<blockquote>
<div><ul>
<li><p>’fro’: Frobenius norm or</p></li>
<li><p>’nuc’ for infinity</p></li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calculating the norm is based on numpynp.linalg.norm(). See there for more
information about the norm.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of point coordinates</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>List[Tuple[float, float]]</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-karabo.util.rascil_util">
<span id="karabo-util-rascil-util"></span><h2>karabo.util.rascil_util<a class="headerlink" href="#module-karabo.util.rascil_util" title="Link to this heading"></a></h2>
<p>Offers functions to handle some of the RASCIL output.</p>
<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.rascil_util.filter_data_dir_warning_message">
<span class="sig-name descname"><span class="pre">filter_data_dir_warning_message</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#karabo.util.rascil_util.filter_data_dir_warning_message" title="Link to this definition"></a></dt>
<dd><p>Avoid unnecessary RASCIL warning that confuses users.</p>
<p>Currently the following RASCIL warning is suppressed:</p>
<p>The RASCIL data directory is not available - continuing but any simulations will
fail</p>
<p>…which pops up because we don’t download the RASCIL data directory.
To the best of our knowledge, we don’t need the data directory (31.07.2024).
We can therefore ignore this warning and avoid unnecessarily alerting users with it.</p>
</dd></dl>

</section>
<section id="module-karabo.util.data_util">
<span id="karabo-util-data-util"></span><h2>karabo.util.data_util<a class="headerlink" href="#module-karabo.util.data_util" title="Link to this heading"></a></h2>
<p>This module offers a variety of functions connected to string manipulation,
file paths and data handling.</p>
<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.data_util.calculate_chunk_size_from_max_chunk_size_in_memory">
<span class="sig-name descname"><span class="pre">calculate_chunk_size_from_max_chunk_size_in_memory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_chunk_memory_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_array</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">DataArray</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#karabo.util.data_util.calculate_chunk_size_from_max_chunk_size_in_memory" title="Link to this definition"></a></dt>
<dd><p>Given that a block of memory can not be larger than <cite>max_chunk_memory_size</cite> bytes
this function calculates how many rows of a xarray can be processed at once.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_chunk_memory_size</strong> (<em>str</em>) – The desired chunk site with unit
prefix, e.g. “100 MB”</p></li>
<li><p><strong>data_array</strong> (<em>Union</em><em>[</em><em>xr.DataArray</em><em>, </em><em>List</em><em>[</em><em>xr.DataArray</em><em>]</em><em>]</em>) – The data arrays
to be processed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The number of rows that can be processed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.data_util.calculate_required_number_of_chunks">
<span class="sig-name descname"><span class="pre">calculate_required_number_of_chunks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_chunk_size_in_memory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_array</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">DataArray</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#karabo.util.data_util.calculate_required_number_of_chunks" title="Link to this definition"></a></dt>
<dd><p>This function calculates the number of chunks needed to process a
collection of <cite>xr.DataArray</cite> not using more than <cite>max_chunk_size_in_memory</cite>
bytes of memory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_chunk_size_in_memory</strong> (<em>str</em>) – The desired chunk site with unit
prefix, e.g. “100 MB”</p></li>
<li><p><strong>data_array</strong> (<em>List</em><em>[</em><em>xr.DataArray</em><em>]</em>) – The data arrays to be processed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The number of chunks used to process the array(s).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.data_util.extract_chars_from_string">
<span class="sig-name descname"><span class="pre">extract_chars_from_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#karabo.util.data_util.extract_chars_from_string" title="Link to this definition"></a></dt>
<dd><p>Removes all digits from an alphanumeric string. Example:</p>
<p>“abc123efg666gggg” –&gt; “abcefggggg”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>string</strong> (<em>str</em>) – The string to be parsed</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A string with all digits removed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.data_util.extract_digit_from_string">
<span class="sig-name descname"><span class="pre">extract_digit_from_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#karabo.util.data_util.extract_digit_from_string" title="Link to this definition"></a></dt>
<dd><p>Extracts the digits from an alphanumeric string. Example:</p>
<p>“abc123efg666gggg” –&gt; 123666</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>string</strong> (<em>str</em>) – The string to be parsed</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The number made from the digits.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.data_util.get_module_absolute_path">
<span class="sig-name descname"><span class="pre">get_module_absolute_path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#karabo.util.data_util.get_module_absolute_path" title="Link to this definition"></a></dt>
<dd><p>Returns the absolute path to the Karabo module.
This function is mainly used to find the data directory of the package.
It has the telescope setup files.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The absolute path to the Karabo module.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.data_util.get_module_path_of_module">
<span class="sig-name descname"><span class="pre">get_module_path_of_module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ModuleType</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#karabo.util.data_util.get_module_path_of_module" title="Link to this definition"></a></dt>
<dd><p>Returns the absolute path to a module in Karabo package.
It is used to find data or sample directories in third-party packages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>module</strong> (<em>ModuleType</em>) – The name of the module.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The absolute path to the Karabo module.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.data_util.get_spectral_sky_data">
<span class="sig-name descname"><span class="pre">get_spectral_sky_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ra</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nfreq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#karabo.util.data_util.get_spectral_sky_data" title="Link to this definition"></a></dt>
<dd><p>Used to add the properties flux and frequency to a sample of
point sources. The data is then returned as a structure that can be
used to define a SkyModel.</p>
<p>See <a class="reference internal" href="../main_features/simulation.html#karabo.simulation.sky_model.SkyModel.add_point_sources" title="karabo.simulation.sky_model.SkyModel.add_point_sources"><code class="xref py py-obj docutils literal notranslate"><span class="pre">karabo.simulation.sky_model.SkyModel.add_point_sources</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ra</strong> (NDArray[<a href="#id16"><span class="problematic" id="id17">np.float_</span></a>]) – A list of RA (right ascension) of the sources.</p></li>
<li><p><strong>dec</strong> (NDArray[<a href="#id18"><span class="problematic" id="id19">np.float_</span></a>]) – Their declinations</p></li>
<li><p><strong>freq0</strong> (NDArray[<a href="#id20"><span class="problematic" id="id21">np.float_</span></a>]) – The main frequency of each source</p></li>
<li><p><strong>nfreq</strong> (<em>int</em>) – Number of frequencies to sample. Must have the same length
as the other arrays.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>A sky model (n x 12 array) which has the following         entries set for each source:</dt><dd><ul class="simple">
<li><p>[0]: right ascension</p></li>
<li><p>[1]: declination</p></li>
<li><p>[2]: stokes I flux</p></li>
<li><p>[6]: reference frequency</p></li>
<li><p>[7]: spectral index set to -200</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>NDArray[<a href="#id22"><span class="problematic" id="id23">np.float_</span></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.data_util.input_wrapper">
<span class="sig-name descname"><span class="pre">input_wrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ret</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'y'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#karabo.util.data_util.input_wrapper" title="Link to this definition"></a></dt>
<dd><p>Wrapper of standard <cite>input</cite> to define what return <cite>ret</cite> it will get during
Unit-tests, since the test just stops otherwise.
The environment variable ‘SKIP_INPUT’ or ‘UNIT_TEST’ must be set
with an arbitrary value to return <cite>ret</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msg</strong> – input message</p></li>
<li><p><strong>ret</strong> – return value if ‘SKIP_INPUT’ or ‘UNIT_TEST’ is set, default=’y’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.data_util.parse_size">
<span class="sig-name descname"><span class="pre">parse_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size_str</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#karabo.util.data_util.parse_size" title="Link to this definition"></a></dt>
<dd><p>Converts a file or data size given with a unit prefix into number of bytes.</p>
<p>Example: “5 MB” –&gt; 5000000</p>
<p>Currently supported are “B”, “KB”, “MB”, “GB”, and “TB”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The decimal prefix is used, not the binary one, i.e 1 KB = 1000 B and         not 1 KB = 1024 B.</p></li>
<li><p>Capitalization does not matter, i.e. “1 kb” is equal to “1 KB”.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>size_str</strong> (<em>str</em>) – The size with unit prefix to convert.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the size cannot be parsed. Mostly due to the unit not
    being one of the supoorted ones.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The size as number of bytes.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.data_util.read_CSV_to_ndarray">
<span class="sig-name descname"><span class="pre">read_CSV_to_ndarray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#karabo.util.data_util.read_CSV_to_ndarray" title="Link to this definition"></a></dt>
<dd><p>Reads a cvs file into a xarray.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The field delimiter is set to ‘,’</p></li>
<li><p>A quote is surrounded by ‘|’</p></li>
<li><p>The first row can be a comment starting with ‘#’</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> (<em>str</em>) – The name of the csv file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The xarray containing the data from the file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>NDArray[np.float64]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.data_util.resample_spectral_lines">
<span class="sig-name descname"><span class="pre">resample_spectral_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">npoints</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dfreq</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spec_line</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dtype</span><span class="p"><span class="pre">[</span></span><span class="pre">float64</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#karabo.util.data_util.resample_spectral_lines" title="Link to this definition"></a></dt>
<dd><p>Downsamples a spectral line. The new line will have npoints.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>npoints</strong> (<em>int</em>) – Desired number of points after resampling. Must be samller
than in the original sample.</p></li>
<li><p><strong>dfreq</strong> (NDArray[<a href="#id24"><span class="problematic" id="id25">np.float_</span></a>]) – The frequencies samples fo the original line.</p></li>
<li><p><strong>spec_line</strong> (NDArray[<a href="#id26"><span class="problematic" id="id27">np.float_</span></a>]) – The intensities of the original line.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple of arrays where         [new_frequency_samples[], new_intensitiy_samples[]].</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[NDArray[<a href="#id28"><span class="problematic" id="id29">np.float_</span></a>], NDArray[<a href="#id30"><span class="problematic" id="id31">np.float_</span></a>]]</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-karabo.util.survey">
<span id="karabo-util-survey"></span><h2>karabo.util.survey<a class="headerlink" href="#module-karabo.util.survey" title="Link to this heading"></a></h2>
<p>This module is to create according survey-files for Karabo.</p>
<dl class="py function">
<dt class="sig sig-object py" id="karabo.util.survey.create_MALS_survey_as_fits">
<span class="sig-name descname"><span class="pre">create_MALS_survey_as_fits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_for_updates</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#karabo.util.survey.create_MALS_survey_as_fits" title="Link to this definition"></a></dt>
<dd><p>Creates MALS (<a class="reference external" href="https://mals.iucaa.in/">https://mals.iucaa.in/</a>) survey as a .fits.gz file.</p>
<p>It takes care of downloading the file from
‘<a class="reference external" href="https://mals.iucaa.in/catalogue">https://mals.iucaa.in/catalogue</a>/catalogue_malsdr1v{0}_all.csv’, and convert it
into a .fits.gz file. Downloading the .csv catalogue may take a while, because
it is about 3.6GB large and downloading-speed depends on some uncontrollable
factors. However, if you already have the .csv catalogue, just put it into
<cite>directory</cite> to take it from the disk-cache. All file-products (.csv &amp; .fits.gz)
are saved in and loaded from <cite>directory</cite>.</p>
<p>This is just a utility function and is not meant to be embedded in any
library-code.</p>
<p>In case the .fits.gz  file already exists, it just returns the the file-path
without doing anything like downloading or creating any file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> – Directory to save and load the according catalogue files.</p></li>
<li><p><strong>version</strong> – Survey version.</p></li>
<li><p><strong>check_for_updates</strong> – Also check for new updates?</p></li>
<li><p><strong>verbose</strong> – Verbose?</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>.fits.gz file-path.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../main_features/sourcedetection.html" class="btn btn-neutral float-left" title="karabo.sourcedetection" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../development.html" class="btn btn-neutral float-right" title="Development Documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, i4ds.
      <span class="lastupdated">Last updated on Oct 09, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>